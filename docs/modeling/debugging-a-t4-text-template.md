---
title: Débogage d'un modèle de texte T4
description: Pour déboguer un modèle de texte au moment de la conception, enregistrez le fichier de modèle de texte, puis choisissez déboguer le modèle T4 dans le menu contextuel du fichier dans Explorateur de solutions.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- text templates, troubleshooting
- text templates, debugging
author: mgoertz-msft
ms.author: mgoertz
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 6c9e4454071002e3bce8478bc825ecfddc17620f
ms.sourcegitcommit: e3a364c014ccdada0860cc4930d428808e20d667
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/19/2021
ms.locfileid: "112385771"
---
# <a name="debugging-a-t4-text-template"></a>Débogage d'un modèle de texte T4
Vous pouvez définir des points d’arrêt dans des modèles de texte. Pour déboguer un modèle de texte au moment de la conception, enregistrez le fichier de modèle de texte, puis choisissez **déboguer le modèle T4** dans le menu contextuel du fichier dans Explorateur de solutions. Pour déboguer un modèle de texte au moment de l’exécution, déboguez simplement l’application à laquelle il appartient.

 Pour déboguer un modèle de texte, vous devez comprendre les étapes du processus de transformation de modèle. Différents types d’erreurs peuvent se produire dans chaque étape. Les étapes sont les suivantes.

|Étape|Modèle au moment de la conception : quand il se produit|Modèle au moment de l’exécution : quand il se produit|
|-|-|-|
|Le code est généré à partir du modèle de texte.<br /><br /> Erreurs dans les directives, ou balises incompatibles ou désordonnées `<#...#>` .|Quand vous enregistrez le modèle ou que vous appelez la transformation de texte.|Quand vous enregistrez le modèle ou que vous appelez la transformation de texte.|
|Le code généré est compilé.<br /><br /> Erreurs de compilation dans votre code de modèle.|Immédiatement après l’étape précédente.|Avec votre code d’application.|
|Le code s’exécute.<br /><br /> Erreurs d’exécution dans votre code de modèle.|Immédiatement après l’étape précédente.|Lorsque votre application s’exécute et appelle le code du modèle.|

 Dans la plupart des cas, les numéros de ligne dans le code du modèle sont fournis dans le rapport d’erreurs. Lorsque le rapport d’erreurs fait référence à un nom de fichier temporaire, la cause habituelle est un crochet incompatible dans le code du modèle de texte.

 Vous pouvez définir des points d’arrêt dans les modèles de texte et les déboguer de la façon habituelle.

## <a name="common-errors-and-fixes"></a>Erreurs et correctifs courants
 Le tableau suivant répertorie les erreurs les plus courantes et leurs correctifs.

|Message d’erreur|Description|Solution|
|-|-|-|
|Échec {0} du chargement de la classe de base' 'à partir de laquelle la classe de transformation hérite.|Se produit si vous ne trouvez pas la classe de base spécifiée dans le `inherits` paramètre dans une directive de modèle. Le message fournit le numéro de ligne de la directive de modèle.|Assurez-vous que la classe spécifiée existe et que l’assembly dans lequel elle existe est spécifié dans une directive d’assembly.|
|Échec de la résolution du texte include pour le fichier :{0}|Se produit lorsque vous ne parvenez pas à trouver un modèle inclus. Le message fournit le nom du fichier include demandé.|Assurez-vous que le chemin d’accès du fichier est relatif au chemin d’accès au modèle d’origine, ou que le fichier se trouve dans un emplacement inscrit auprès de l’hôte, ou qu’il existe un chemin d’accès complet au fichier.|
|Des erreurs ont été générées lors de l’initialisation de l’objet de transformation. La transformation ne sera pas exécutée.|Se produit lorsque’Initialize () 'de la classe de transformation a échoué ou a retourné la valeur false.|Le code de la fonction Initialize () provient de la classe de transformation de base spécifiée dans la \<#@template#> directive et à partir des processeurs de directive. L’erreur qui a provoqué l’échec de l’initialisation est probablement sur la liste d’erreurs. Recherchez la raison de l’échec. Vous pouvez consulter le code généré réel pour Initialize () en suivant les procédures pour déboguer un modèle.|
|L’assembly' {0} 'pour le processeur de directive' {1} 'n’a pas reçu le jeu d’autorisations FullTrust. Seuls les assemblys approuvés sont autorisés à fournir des processeurs de directive. Ce processeur de directive ne sera pas chargé.|Se produit lorsque le système n’accorde pas d’autorisations FullTrust à un assembly contenant un processeur de directive. Le message fournit le nom de l’assembly et le nom du processeur de directive.|Veillez à utiliser uniquement des assemblys approuvés sur l’ordinateur local.|
|Le chemin d’accès' {0} 'doit être local sur cet ordinateur ou dans une partie de votre zone de confiance.|Se produit lorsqu’une directive ou une directive d’assembly fait référence à un fichier qui ne se trouve pas sur votre ordinateur local ou sur la zone de confiance de votre réseau.|Assurez-vous que le répertoire dans lequel se trouvent les directives de directive ou d’assembly se trouve dans votre zone de confiance. Vous pouvez ajouter un répertoire réseau à votre zone de confiance via Internet Explorer.|
|Plusieurs erreurs de syntaxe comme « jeton non valide » ou « un espace de noms ne peut pas contenir directement des membres »|Trop d’accolades fermantes dans le code de votre modèle. Le compilateur le déroutant avec le code de génération standard.|Vérifiez le nombre d’accolades fermantes et de crochets à l’intérieur des délimiteurs de code.|
|Les boucles ou les conditions ne sont pas compilées ou exécutées correctement. Par exemple : `<#if (i>10)#> Number is: <#= i #>`.<br /><br /> Ce code renvoie toujours la valeur de i. Seul « nombre est : » est conditionnel.|En C#, utilisez toujours des accolades pour entourer les blocs de texte incorporés dans les instructions de contrôle.|Ajouter des accolades : `<#if (i>10) { #>    Number is: <#= i #><# } #>` .|
|« Expression trop complexe » lors du traitement d’un modèle au moment du design ou de la compilation d’un modèle d’exécution (prétraitée).<br /><br /> Visual Studio cesse de fonctionner lors de la tentative d’inspection du code généré par un modèle d’exécution.|Le bloc de texte est trop long. T4 convertit les blocs de texte en une expression de concaténation de chaînes, avec un littéral de chaîne pour chaque ligne de modèle. Les blocs de texte très longs peuvent effectuer un pas à pas détaillé dans les limites de taille du compilateur.|Scindez le bloc de texte long avec un bloc d’expression, par exemple :<br /><br /> `<#= "" #>`|

## <a name="warning-descriptions-and-fixes"></a>Descriptions et correctifs d’avertissement
 Le tableau suivant répertorie les avertissements les plus courants, ainsi que les correctifs, le cas échéant.

|Message d’avertissement|Description|Solution|
|-|-|-|
|Le chargement du fichier include' {0} 'a retourné une chaîne null ou vide.|Se produit si un fichier de modèle de texte inclus est vide. Le message fournit le nom du fichier inclus.|Supprimez la directive include ou assurez-vous que le fichier contient du contenu.|
|Compilation de la transformation :|Ajoute cette chaîne à toutes les erreurs ou avertissements provenant du compilateur lors de la compilation de la transformation. Cette chaîne signifie que le compilateur a levé une erreur ou un avertissement.|Si vous rencontrez un problème lors de la recherche de la DLL, vous devrez peut-être fournir le chemin d’accès complet ou un nom fort qualifié complet si la DLL se trouve dans le GAC.|
|Le paramètre « {0} » existe déjà dans la directive. Le paramètre dupliqué sera ignoré.|Se produit lorsqu’un paramètre est spécifié plusieurs fois dans une directive. Le message fournit le nom du paramètre et le numéro de ligne de la directive.|Supprimez la spécification de paramètre en double.|
|Une erreur s’est produite lors du chargement du fichier include' {0} '. La directive include sera ignorée.|Se produit lorsque vous ne parvenez pas à trouver un fichier spécifié dans une `include` directive. Le message fournit le nom du fichier et le numéro de ligne de la directive.|Assurez-vous que le fichier include existe dans le même répertoire que le fichier de modèle de texte d’origine ou dans l’un des répertoires Include inscrits auprès de l’ordinateur hôte.|
|Une classe de base non valide a été spécifiée pour la classe de transformation. La classe de base doit dériver de Microsoft. VisualStudio. TextTemplating. TextTransformation.|Se produit lorsque le `inherits` paramètre dans une directive de modèle spécifie une classe qui n’hérite pas de `TextTransformation` . Le message fournit le numéro de ligne de la directive de modèle.|Spécifiez une classe qui dérive de `TextTransformation` .|
|Une culture non valide a été spécifiée dans la directive’template'. La culture doit être au format « XX-XX ». La culture dite indifférente sera utilisée.|Se produit lorsque le paramètre culture d’une directive de modèle est spécifié de manière incorrecte. Le message fournit le numéro de ligne de la directive de modèle.|Remplacez le paramètre culture par une culture valide au format « XX-XX ».|
|Une valeur de débogage non valide' {0} 'a été spécifiée dans la directive de modèle. La valeur de débogage doit être « true » ou « false ». La valeur par défaut « false » est utilisée.|Se produit lorsque le `debug` paramètre d’une directive de modèle est spécifié de manière incorrecte. Le message fournit le numéro de ligne de la directive de modèle.|Définissez le paramètre debug sur « true » ou « false ».|
|Une valeur HostSpecific non valide' {0} 'a été spécifiée dans la directive de modèle. La valeur HostSpecific doit être « true » ou « false ». La valeur par défaut « false » est utilisée.|Se produit lorsque le paramètre spécifique à l’hôte dans une `template` directive est spécifié de manière incorrecte. Le message fournit le numéro de ligne de la directive de modèle.|Affectez la valeur « true » ou « false » au paramètre spécifique à l’hôte.|
|Une langue non valide' {0} 'a été spécifiée dans la directive’template'. Le langage doit être « C# » ou « VB ». La valeur par défaut de « C# » sera utilisée.|Se produit lorsqu’un langage non pris en charge est spécifié dans la `template` directive. Seuls « C# » ou « VB » sont autorisés (non-respect de la casse). Le message fournit le numéro de ligne de la directive de modèle.|Définissez le `language` paramètre dans la directive de modèle sur « C# » ou « VB ».|
|Plusieurs directives de sortie ont été trouvées dans le modèle. Tout sauf le premier sera ignoré.|Se produit lorsque plusieurs `output` directives sont spécifiées dans un fichier de modèle. Le message fournit le numéro de ligne de la directive de sortie dupliquée.|Supprimer les `output` directives en double.|
|Plusieurs directives de modèle ont été trouvées dans le modèle. Tout sauf le premier sera ignoré. Plusieurs paramètres de la directive de modèle doivent être spécifiés dans une directive de modèle.|Se produit si vous spécifiez plusieurs `template` directives dans un fichier de modèle de texte (y compris les fichiers inclus). Le message fournit le numéro de ligne de la directive de modèle dupliquée.|Agréger les différentes `template` directives en une seule `template` directive.|
|Aucun processeur n’a été spécifié pour une directive nommée' {0} '. La directive sera ignorée.|Se produit si vous spécifiez une `custom` directive, mais que vous ne fournissez pas d' `processor` attribut. Le message fournit le nom de la directive et le numéro de ligne.|Fournissez un `processor` attribut avec le nom du `directive` processeur pour la directive.|
|Un processeur nommé' {0} 'est introuvable pour la directive nommée' {1} '. La directive sera ignorée.|Se produit lorsque le système ne trouve pas le `directive` processeur que vous avez spécifié dans une `custom` directive. Le message fournit le nom de la directive, le nom du processeur et le numéro de ligne de la directive.|Affectez le `processor` nom du processeur de directive à l’attribut dans la directive.|
|Un paramètre requis' {0} 'pour la directive' {1} 'est introuvable. La directive sera ignorée.|Se produit lorsque le système ne fournit pas de paramètre de directive obligatoire. Le message fournit le nom du paramètre manquant, le nom de la directive et le numéro de ligne.|Fournissez le paramètre manquant.|
|Le processeur nommé' {0} 'ne prend pas en charge la directive nommée' {1} '. La directive sera ignorée.|Se produit lorsqu’un processeur de directive ne prend pas en charge une directive. Le message fournit le nom et le numéro de ligne de la directive incriminée, ainsi que le nom du processeur de directive.|Corrigez le nom de la directive.|
|La directive include pour le fichier' {0} 'provoque une boucle infinie.|S’affiche si des directives include circulaires sont spécifiées (par exemple, le fichier A inclut le fichier B, qui inclut le fichier A).|Ne spécifiez pas de directives include circulaires.|
|Exécution de la transformation :|Ajoute cette chaîne à toutes les erreurs ou tous les avertissements générés lors de l’exécution de la transformation.|Non applicable.|
|Une balise de début ou de fin inattendue a été trouvée dans un bloc. Assurez-vous que vous n’avez pas mal tapé une balise de début ou de fin, et que vous n’avez pas de blocs imbriqués dans le modèle.|S’affiche lorsque vous avez un inattendu \<# or #> . Autrement dit, si vous avez un \<# after another open tag that has not been closed, or you have a #> quand il n’y a pas d’étiquette ouverte non fermée avant celui-ci. Le message fournit le numéro de ligne de la balise incompatible.|Supprimez la balise de début ou de fin incompatible, ou utilisez un caractère d’échappement.|
|Une directive a été spécifiée dans un format incorrect. La directive sera ignorée. Spécifiez la directive au format `<#@ name [parametername="parametervalue"]*  #>`|Affiché par l’analyseur si aucune directive n’est spécifiée dans le format correct. Le message fournit le numéro de ligne de la directive incorrecte.|Assurez-vous que toutes les directives se présentent sous la forme `<#@ name [parametername="parametervalue"]*  #>` . Pour plus d’informations, consultez Directives pour les [modèles de texte T4](../modeling/t4-text-template-directives.md).|
|Échec du chargement de l’assembly' {0} 'pour le processeur de directive inscrit' {1} '<br /><br /> {2}|Se produit lorsqu’un processeur de directive n’a pas pu être chargé par l’hôte. Le message identifie l’assembly fourni pour le processeur de directive et le nom du processeur de directive.|Assurez-vous que le processeur de directive est correctement inscrit et que l’assembly existe.|
|Impossible de trouver le type' {0} 'dans l’assembly' {1} 'pour le processeur de directive inscrit' {2} '<br /><br /> {3}|Se produit lorsqu’un type de processeur de directive n’a pas pu être chargé à partir de son assembly. Le message fournit le nom du type, de l’assembly et du processeur de directive.|Le VSHost recherche les informations sur le processeur de directive (nom, assembly et type) dans le registre. Assurez-vous que le processeur de directive est inscrit correctement et que le type existe dans l’assembly.|
|Un problème est survenu lors du chargement de l’assembly' {0} '|Se produit lorsqu’un problème est survenu lors du chargement d’un assembly. Le message fournit le nom de l’assembly.|Vous pouvez spécifier les assemblys à charger dans \<@#assembly#> les directives et par les processeurs de directive. Le message d’erreur qui suit cette chaîne doit fournir des données supplémentaires sur la raison de l’échec du chargement de l’assembly.|
|Un problème est survenu lors de la création et de l’initialisation du processeur pour une directive nommée' {1} '. Le type du processeur est {0} . La directive sera ignorée.|Se produit lorsque le système n’a pas pu créer ou initialiser un processeur de directive. Le message fournit le nom et le numéro de ligne de la directive et le type du processeur.|Veillez à utiliser le processeur de directive correct, et le processeur de directive a un constructeur public par défaut. Dans le cas contraire, utilisez les options de débogage pour déterminer la raison de l’échec de la méthode Initialize () du processeur de directive. Pour plus d’informations, consultez [résolution des problèmes liés aux modèles de texte](../modeling/debugging-a-t4-text-template.md).|
|Une exception a été levée lors du traitement d’une directive nommée' {0} '.|Se produit lorsqu’un processeur de directive lève une exception lors du traitement d’une directive.|Assurez-vous que les paramètres du processeur de directive sont corrects.|
|L’hôte a levé une exception lors de la tentative de résolution de la référence de l’assembly' {0} '.|Se produit lorsque l’hôte lève une exception lorsqu’il tente de résoudre une référence d’assembly. Le message fournit la chaîne de référence de l’assembly.|Les références d’assembly proviennent de \<@#assembly#> directives et de processeurs de directive. Assurez-vous que le paramètre’name’fourni dans le paramètre assembly est correct.|
|Tentative de spécification d’une valeur non prise en charge {1} ' {0} 'pour la directive {2}|Se produit par RequiresProvidesDirectiveProcessor (tous nos processeurs de directive générés dérivent de celui-ci), lorsque vous fournissez un argument requires ou fourni non pris en charge.|Assurez-vous que les noms figurant dans les paires nom = 'valeur’fournis dans les paramètres requires et fournis sont corrects.|
